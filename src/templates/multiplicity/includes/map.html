  <div class="panel padding10">
    <div class="panel-content">
      <div id="map"></div>
    </div>
  </div>

    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"></script>
    <script type="text/javascript">

        var leafletMap = L.map('map').setView([{{ info.location.lat }}, {{ info.location.lng }}], {{ info.location.default_zoom|default_if_none:12 }});

        var bluemarker = L.divIcon({className: 'bluemarker', iconSize: [40,40], iconAnchor: [20,40]});
        var darkbluemarker = L.divIcon({className: 'darkbluemarker', iconSize: [40,40], iconAnchor: [20,40]});
        var greenmarker = L.divIcon({className: 'greenmarker', iconSize: [40,40], iconAnchor: [20,40]});
        var yellowmarker = L.divIcon({className: 'yellowmarker', iconSize: [40,40], iconAnchor: [20,40]});
        var redmarker = L.divIcon({className: 'redmarker', iconSize: [40,40], iconAnchor: [20,40]});

        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiY29tbXVuaXRyZWUiLCJhIjoiY2lzdHZuanl1MDAwODJvcHR1dzU5NHZrbiJ9.0ETJ3fXYJ_biD7R7FiwAEg', {
          maxZoom: 19,
          attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
            '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
            'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
          id: 'mapbox.streets'
        }).addTo(leafletMap);

        leafletMap.scrollWheelZoom.disable();

        var capetown      = L.marker([-33.8161, 18.2675], {icon:darkbluemarker}),
            durban        = L.marker([-33.8661, 18.2675], {icon:darkbluemarker}),
            joburg        = L.marker([-33.9161, 18.2675], {icon:redmarker}),
            pretoria      = L.marker([-33.9661, 18.2675], {icon:redmarker});
            port_elizabth = L.marker([-33.9661, 18.2975], {icon:greenmarker});
            bloemfontein  = L.marker([-33.9661, 18.2375], {icon:greenmarker});

        var coast = L.featureGroup([capetown, durban]).addTo(leafletMap);
        var inland = L.featureGroup([joburg, pretoria]).addTo(leafletMap);
        var more = L.featureGroup([port_elizabth, bloemfontein]).addTo(leafletMap);

        allGroups = [coast, inland, more];

        {% for details in spaces %}
          {% if details.location.lat %}
            L.marker([{{ details.location.lat }}, {{details.location.lng }}], {icon:{{ details.type.marker_color}}marker, riseOnHover: true}).addTo(leafletMap)
            .bindPopup("<b>{{ details.name }}</b><br>{{ details.type.name }}<br />{% if details.image %}<a href='{% url 'multiplicity:space' info.slug details.type.topic.slug details.type.slug details.slug %}'><img src='{{ details.image.url }}' /></a>{% endif %}<br /><a class='button is-info' href='{% url 'multiplicity:space' info.slug details.type.topic.slug details.type.slug details.slug %}'>View details</a>. ", {minWidth:200});
          {% endif %}
        {% endfor %}

        // remove and add layers
        function showAllGroups(){
          $(allGroups).each(function() {
            leafletMap.addLayer(this);
          })
        };

        function removeAllGroups() {
          $(allGroups).each(function() {
            leafletMap.removeLayer(this);
          })
        };

        function showOneGroup(group) {
          removeAllGroups();
          leafletMap.addLayer(group);
        }
    </script>
