{% extends 'multiplicity/base.html' %}
{% load bootstrap3 %}
{% load static %}

{% block title %}{{ info.name }} | {{ info.country }}{% endblock %}
{% block container %}stretch-bg-head{% endblock %}

{% block content %}

<h2>Micro-territorial units</h2>

<ul class="nav nav-tabs selectform">
  <li class="active"><a href="#filebox" data-id="filebox">File upload</a></li>
  <li><a href="#textbox" data-id="textbox">Direct input</a></li>
</ul>

<div class="panel">
  <div class="panel-body forms">

    <form action="{% url 'multiplicity:upload_mtu_review' info.slug %}" method="post" class="form form-horizontal" id="textbox">
      {% csrf_token %}
      <textarea class="form-control" name="data" placeholder="Copy the data from a spreadsheet in the format shown above"></textarea>
      <p><button type="submit" class="btn btn-success">Next</button></p>
    </form>


    <form action="{% url 'multiplicity:upload_mtu_review' info.slug %}" method="post" class="form form-horizontal" enctype="multipart/form-data" id="filebox">
        {% csrf_token %}

        <div class="form-group">
          <label class="col-sm-2 control-label">Name</label>
          <div class="col-sm-10 label-text">
            <input class="form-control" type="text" name="name" required placeholder="Name of the MTU, e.g. 'Suburb', 'Zip code', 'Municipality'" />
          </div>
        </div>

        <div class="form-group">
          <label class="col-sm-2 control-label">GeoJSON file</label>
          <div class="col-sm-10">
            <input class="form-control" type="file" name="file" required />
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-offset-2 col-sm-10">
            <button type="submit" class="btn btn-success">Next</button>
          </div>
        </div>
    </form>

  </div>
</div>

{% endblock %}

{% block head %}
<style type="text/css">
#textbox{display:none}
textarea.form-control{height:250px;display:block;margin-bottom:10px}
</style>
{% endblock %}

{% block sidebar %}
{% include 'multiplicity/sidebar.default.html' %}

{% endblock %}

{% block pagehead %}
<div id="page-head">
    
    <div id="page-title">
        <h1 class="page-header text-overflow">Upload</h1>
    </div>

    <ol class="breadcrumb">
        <li><a href="./"><i class="pli-home"></i></a></li>
        <li><a href="{% url 'multiplicity:index' %}">Cities</a></li>
        <li><a href="{% url 'multiplicity:city' info.slug %}">{{ info.name }}</a></li>
        <li><a href="{% url 'multiplicity:upload' info.slug %}">Upload</a></li>
        <li class="active">Micro-territorial units</li>
    </ol>

</div>
{% endblock %}

{% block footer %}
<script type="text/javascript">
$(function(){
  $(".selectform a").click(function(e){
    e.preventDefault();
    $(".selectform li").removeClass("active");
    $(this).closest("li").addClass("active");
    var id = $(this).data("id");
    $(".forms form").hide();
    $(".forms form#" + id).show();
  });
});
</script>
{% endblock %}
