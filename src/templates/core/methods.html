{% extends 'multiplicity/base.html' %}
{% load static %}

{% block title %}Methods{% endblock %}
{% block container %}stretch-bg-head{% endblock %}

{% block content %}
{% include 'multiplicity/includes/top.navbar.html' %}

<div class="row">
  <div class="col-lg-12">
    <div class="panel">
      <div class="panel-body">

        <table class="table table-striped">
          <tr>
            <th>Method</th>
            <th>Strengths</th>
            <th>Weaknesses</th>
          </tr>
          {% for details in list %}
          {% ifchanged details.category %}
          <tr>
            <th colspan="3" class="tt">{{ details.category }}</th>
          </tr>
          {% endifchanged %}
            <tr>
              <td><a href="/admin/core/method/{{ details.id }}/change/">{{ details }}</a></td>
              <td>{{ details.strengths|safe }}</td>
              <td>{{ details.weaknesses|safe }}</td>
            </tr>
          {% endfor %}
        </table>

        {% for details in list %}
          {% ifchanged details.category %}
            <h4 style="margin-top:50px">{{ details.category }}</h4>
            <table class="table table-striped">
              <tr>
                <th>Method</th>
                <th>Case studies</th>
              </tr>
              {% for sub in list %}
                {% if details.category == sub.category %}
                  <tr>
                    <td>{{ sub }}</td>
                    <td style="width:150px">{{ count|get_item:sub.id }}</td>
                  </tr>
                {% endif %}
              {% endfor %}
            </table>
          {% endifchanged %}

          <h4 style="font-size:100%;margin-top:30px">{{ details }}</h4>
          {{ details.description|safe }}
        {% endfor %}

        {% for details in list %}
          <h4>{{ details }}</h4>

          <table class="table table-striped datatable">
            <thead>
              <tr>
                <th>Title</th>
                <th>Methodology</th>
                <th>City</th>
                <th>Year</th>
              </tr>
            </thead>
            <tbody class="list">
            {% for details in paper_list|get_item:details.id %}
              <tr>
                <td><a href="{% url 'core:reference' details.id %}"><span class="title">{{ details.title }}</span></a></td>
                <td class="tags">
                  <div class="taglist">
                  {% for tag in details.tags.all %}
                    {% if tag.parent_tag.id == 318 and tag.id != 1 %}
                      <div><span class="label label-default">{{ tag.shortcode }}</span></div>
                    {% endif %}
                  {% endfor %}
                  </div>
                </td>
                <td class="tags">
                  <div class="taglist">
                  {% for space in details.spaces.all %}
                      <div><span class="label label-default">{{ space.name }}</span></div>
                      <span style="display:none">{{ space.country.name }}</span>
                  {% endfor %}
                  </div>
                </td>
                <td class="year">{{ details.year }}</td>
            {% endfor %}
            </tbody>
          </table>

        {% endfor %}

      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block head %}
<style type="text/css">
.tt{text-align:center}
</style>
{% endblock %}

{% block sidebar %}
{% include 'multiplicity/sidebar.default.html' %}

{% endblock %}

{% block pagehead %}
<div id="page-head">
    
  <div id="page-title">
    <h1 class="page-header text-overflow">About Us</h1>
  </div>

  <ol class="breadcrumb">
    <li><a href="/"><i class="pli-home"></i></a></li>
    <li><a href="{% url 'core:about' %}">About</a></li>
    <li class="active">About Us</li>
  </ol>

</div>
{% endblock %}

{% block footer %}

{% endblock %}
