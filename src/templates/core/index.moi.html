{% extends 'multiplicity/base.html' %}
{% load static %}

{% block title %}Prototype overview{% endblock %}
{% block container %}stretch-bg-head{% endblock %}

{% block content %}

<div class="homepage {% if SITE_ID == 1 %}moc{% else %}moi{% endif %}">
  {% if SITE_ID == 1 %}
  <div class="row">
    <div class="col-lg-6">
      <div class="panel widget">
          <div class="widget-header bg-purple city-header" style="min-height:266px">

              <img class="widget-bg img-responsive" src="/media/referencespace/capetown.jpg" alt="">

          </div>
          <div class="widget-body text-center">

              <img alt="" class="widget-img img-circle img-border-light" src="https://static.metabolismofcities.org/multiplicity/img/cities/map-cape-town.jpg">

              <h4 class="mar-no text-main">Cape Town</h4>
              <p class="text-muted mar-no">South Africa</p>
          </div>
      </div>
    </div>

    <div class="col-lg-6">

      <div class="row">
        <div class="col-lg-4">
          <div class="panel panel-dark panel-colorful">
            <div class="pad-all text-center">
              <a href="/about/team">
                <span class="text-3x text-thin">5</span>
                <p>Islands</p>
              </a>
            </div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="panel panel-dark panel-colorful">
            <div class="pad-all text-center">
              <a href="/resources/publications">
                <span class="text-3x text-thin">477</span>
                <p>Resources</p>
              </a>
            </div>
          </div>
        </div><div class="col-lg-4">
          <div class="panel panel-dark panel-colorful">
            <div class="pad-all text-center">
              <a href="/resources/videos">
                <span class="text-3x text-thin">23</span>
                <p>Research Projects</p>
              </a>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="row">
    <div class="col-sm-6 col-lg-4">
        <div class="panel panel-trans">
            <div class="panel-heading">
                <h3 class="panel-title">Latest news</h3>
            </div>
            <div class="pad-ver">
                <ul class="list-group bg-trans list-todo mar-no">
                  {% for details in news %}
                    <li class="list-group-item">
                      <a href="{% url 'core:news' details.id %}">{{ details.title }}</a><br>
                      <span >{{ details.created_at|date:"M d, Y" }}</span>
                    </li>
                  {% endfor %}
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-6 col-lg-4">
        <div class="panel panel-trans">
            <div class="panel-heading">
                <h3 class="panel-title">Latest resources</h3>
            </div>
            <div class="pad-ver">
                <ul class="list-group bg-trans list-todo mar-no">
                  {% for details in publications %}
                    <li class="list-group-item">
                      <a href="{% url 'core:reference' details.id %}">{{ details.title }}</a>
                      <span class="label label-success">{{ details.type.name }}</span>
                      <br>
                    </li>
                  {% endfor %}
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-6 col-lg-4">
        <div class="panel panel-trans">
            <div class="panel-heading">
                <h3 class="panel-title">Latest research</h3>
            </div>
            <div class="pad-ver">
                <ul class="list-group bg-trans list-todo mar-no">
                  {% for details in projects %}
                    <li class="list-group-item">
                      <a href="{% url 'core:project' details.id %}">{{ details.name }}</a><br>
                    </li>
                  {% endfor %}
                </ul>
            </div>
        </div>
    </div>
  </div>
  {% else %}

  <section class="top-banner">
    <div class="row">
      <div class="col-lg-8">
        <div class="welcome-text pad-all">
          <div>
            Metabolism of Islands is dedicated to better <span class="highlight">understanding the sustainability of islands</span> through research into <span class="highlight">material stocks and flows</span>
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="panel widget">
          <div class="widget-header bg-purple city-header slideshow photos" style="min-height:266px">
            <img class="widget-bg img-responsive" src="https://prototype.metabolismofislands.org/media/referencespace/English_Barbour_Antigua_resized_800_p.jpg" />
            <img class="widget-bg img-responsive" src="https://prototype.metabolismofislands.org/media/referencespace/Trinket.jpg" alt="">
          </div>
          <div class="widget-body text-center">
            <div class="slideshow maps">
              <img alt="" class="widget-img img-circle img-border-light" src="https://prototype.metabolismofislands.org/static/multiplicity/img/cities/map-antigua-barbuda.jpg">
              <img alt="" class="widget-img img-circle img-border-light" src="https://prototype.metabolismofislands.org/static/multiplicity/img/cities/map-antwerp.jpg">
            </div>
            <h4 class="mar-no text-main island-name">Antigua &amp; Barbuda</h4>
            <p class="text-muted mar-no island-area">Caribbean</p>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-4">
        <div href="" class="panel media middle pad-all highlight-link">
          <div class="media-left pad-all">
            <img class="img-lg" src="{% static picture %}multiplicity/img/icons/island.svg">
          </div>
          <div class="media-body pad-lft">
            <p class="text-2x mar-no text-main">5<br>islands</p>
          </div>
        </div>
        <div class="panel panel-trans">
          <div class="panel-heading">
            <h3 class="panel-title">Latest news</h3>
          </div>
          <div class="pad-ver">
            <ul class="list-group bg-trans list-todo mar-no">
              {% for details in news %}
                <li class="list-group-item">
                  <a href="{% url 'core:news' details.id %}">{{ details.title }}</a><br>
                  <span >{{ details.created_at|date:"M d, Y" }}</span>
                </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <div href="" class="panel media middle pad-all highlight-link">
          <div class="media-left pad-all">
            <img class="img-lg" src="{% static picture %}multiplicity/img/icons/resources.svg">
          </div>
          <div class="media-body pad-lft">
            <p class="text-2x mar-no text-main">477<br>resources</p>
          </div>
        </div>
        <div class="panel panel-trans">
          <div class="panel-heading">
            <h3 class="panel-title">Latest resources</h3>
          </div>
          <div class="pad-ver">
            <ul class="list-group bg-trans list-todo mar-no">
              {% for details in publications %}
                <li class="list-group-item">
                  <a href="{% url 'core:reference' details.id %}">{{ details.title }}</a>
                  <span class="label label-success">{{ details.type.name }}</span>
                  <br>
                </li>
              {% endfor %}
              </ul>
            </div>
        </div>
      </div>
      <div class="col-lg-4">
        <div href="" class="panel media middle pad-all highlight-link">
          <div class="media-left pad-all">
            <img class="img-lg" src="{% static picture %}multiplicity/img/icons/project.svg">
          </div>
          <div class="media-body pad-lft">
            <p class="text-2x mar-no text-main">23<br>projects</p>
          </div>
        </div>
        <div class="panel panel-trans">
          <div class="panel-heading">
            <h3 class="panel-title">Latest research</h3>
          </div>
          <div class="pad-ver">
            <ul class="list-group bg-trans list-todo mar-no">
              {% for details in projects %}
                <li class="list-group-item">
                  <a href="{% url 'core:project' details.id %}">{{ details.name }}</a><br>
                </li>
              {% endfor %}
            </ul>
        </div>
      </div>
      </div>
    </div>
  </section>
  {% endif %}
</div>

  {% endblock %}

  {% block head %}
  {% endblock %}

  {% block sidebar %}
  {% include 'multiplicity/sidebar.default.html' %}

  {% endblock %}
  {% block pagehead %}
  <div id="page-head">
    <div id="page-title">
      <h1 class="page-header text-overflow">Metabolism of Islands</h1>
      <ol class="breadcrumb">
        <li><a href="./"><i class="pli-home"></i></a></li>
        <li class="active">Homepage</li>
      </ol>
    </div>
  </div>
  {% endblock %}

  {% block footer %}

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var islandNames = ["Antigua & Barbuda", "Samothraki"];
      var islandAreas = ["Caribbean", "Europe"];
      var count = 1;
      setInterval(function() {
        count = ($(".slideshow :nth-child("+count+")").fadeOut().next().length == 0) ? 1 : count+1;
        $(".slideshow :nth-child("+count+")").fadeIn();

        console.log(count);

        $(".island-name").fadeOut(function() {
          $(this).text(islandNames[count - 1])
        }).fadeIn();

        $(".island-area").fadeOut(function() {
          $(this).text(islandAreas[count - 1])
        }).fadeIn();

      }, 10000);

    });
  </script>

  {% endblock %}